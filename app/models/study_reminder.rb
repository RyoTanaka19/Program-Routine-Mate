class StudyReminder < ApplicationRecord
  # ðŸ“Žã€ã‚¢ã‚½ã‚·ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã€‘
  # å„ StudyReminder ã¯ã€å¿…ãš1äººã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç´ã¥ã„ã¦ã„ã¾ã™ã€‚
  # ã¤ã¾ã‚Šã€Œèª°ã®ãƒªãƒžã‚¤ãƒ³ãƒ€ãƒ¼ãªã®ã‹ã€ãŒã‚ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
  # ã“ã®è¨­å®šã«ã‚ˆã‚Šã€user.study_reminders ã‚„ reminder.user ã®ã‚ˆã†ãªå‚ç…§ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
  belongs_to :user

  # ðŸ“…ã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤ºç”¨ãƒ¡ã‚½ãƒƒãƒ‰ã€‘
  # ã“ã®ãƒªãƒžã‚¤ãƒ³ãƒ€ãƒ¼ã‚’ã€Œã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿å½¢å¼ã€ã«å¤‰æ›ã—ã¦è¿”ã—ã¾ã™ã€‚
  # JSONå½¢å¼ã«è¿‘ã„ãƒãƒƒã‚·ãƒ¥ã§ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆJavaScriptãªã©ï¼‰ã‹ã‚‰ä½¿ã„ã‚„ã™ããªã£ã¦ã„ã¾ã™ã€‚
  def as_calendar_event
    {
      title: "å­¦ç¿’æ™‚é–“",                    # ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆã“ã“ã§ã¯å›ºå®šã§ã€Œå­¦ç¿’æ™‚é–“ã€ï¼‰
      start: start_time.iso8601,          # ã‚¤ãƒ™ãƒ³ãƒˆé–‹å§‹æ™‚åˆ»ã‚’ ISO 8601 å½¢å¼ã«å¤‰æ›ï¼ˆä¾‹ï¼š2025-04-23T10:00:00+09:00ï¼‰
      end: end_time.iso8601               # ã‚¤ãƒ™ãƒ³ãƒˆçµ‚äº†æ™‚åˆ»ã‚’åŒã˜å½¢å¼ã§
    }
  end

  # âœ…ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå…¥åŠ›ãƒã‚§ãƒƒã‚¯ï¼‰ã€‘
  # start_time ã¨ end_time ãŒç©ºã§ãªã„ã“ã¨ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚
  # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒªãƒžã‚¤ãƒ³ãƒ€ãƒ¼ã‚’ä½œæˆãƒ»æ›´æ–°ã™ã‚‹ã¨ãã«ã€ã“ã‚Œã‚‰ãŒæœªå…¥åŠ›ã ã¨ä¿å­˜ã§ãã¾ã›ã‚“ã€‚
  validates :start_time, presence: true   # é–‹å§‹æ™‚åˆ»ãŒå¿…é ˆ
  validates :end_time, presence: true     # çµ‚äº†æ™‚åˆ»ã‚‚å¿…é ˆ

  # ðŸ’¡ï¼ˆè¿½åŠ ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å…¥ã‚Œã‚‹ãªã‚‰ã“ã“ã«æ›¸ã‘ã¾ã™ï¼‰
  # ä¾‹ãˆã°ã€Œçµ‚äº†æ™‚åˆ»ã¯é–‹å§‹æ™‚åˆ»ã‚ˆã‚Šå¾Œã§ã‚ã‚‹ã“ã¨ã€ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã€‚
end
