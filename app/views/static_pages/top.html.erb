<div class="flex flex-col items-center justify-center min-h-screen px-4 text-center">
  <% images = ["ogp.png", "ProgramRoutineMate.png", "mate.png"] %>
  <% selected_image = images.sample %>

  <!-- 中央画像 -->
  <div class="relative flex flex-col items-center" data-aos="zoom-in" data-aos-delay="0" data-aos-duration="800">
    <%= image_tag selected_image, class: "w-screen max-w-none h-auto opacity-90" %>

    <!-- スクロール誘導（画像の中に重ねて表示） -->
    <div class="absolute bottom-60 flex flex-col items-center w-full z-10" data-aos="fade-down" data-aos-delay="100" data-aos-duration="800">
      <span class="mb-1 text-green-600 font-semibold text-sm animate-pulse"><%= t('home.scroll_instructions') %></span>
      <div class="bounce-infinite">
        <i class="fa-solid fa-angles-down text-green-600 text-3xl"></i>
      </div>
    </div>
  </div>

  <!-- 説明文 -->
  <div id="scroll-description"
    class="mt-8 text-green-600 font-semibold text-lg max-w-xl text-center leading-relaxed"
    data-aos="fade-up" data-aos-delay="200" data-aos-duration="800" data-aos-once="true">
    <%= t('home.title') %><br>
    <%= t('home.description') %>
  </div>

  <!-- 「こんな方におすすめ!!」タイトル -->
  <div class="mt-20 mb-6 text-center" data-aos="fade-up" data-aos-delay="300" data-aos-duration="800" data-aos-once="true">
    <h2 class="text-green-600 text-2xl md:text-3xl font-bold tracking-wide">
      <%= t('home.recommended_for.title') %>
    </h2>
  </div>

  <!-- おすすめ3つ -->
  <div class="mt-12 px-4 w-full max-w-screen-lg mx-auto">
    <div class="flex flex-col md:flex-row justify-between items-stretch gap-4">
      <% cards = [
        {
          img: "mate2.png",
          title: t('home.recommended_for.cards.beginner.title'),
          text: t('home.recommended_for.cards.beginner.text'),
          delay: 500
        },
        {
          img: "one.png",
          title: t('home.recommended_for.cards.overwhelmed.title'),
          text: t('home.recommended_for.cards.overwhelmed.text'),
          delay: 600
        },
        {
          img: "ai.png",
          title: t('home.recommended_for.cards.fun_with_ai.title'),
          text: t('home.recommended_for.cards.fun_with_ai.text'),
          delay: 700
        }
      ] %>

      <% cards.each do |card| %>
        <div class="bg-white rounded-2xl shadow-md p-4 md:w-1/3 flex flex-col justify-between text-center"
          data-aos="fade-up"
          data-aos-delay="<%= card[:delay] %>"
          data-aos-duration="800">
          <!-- 画像 -->
          <div class="w-full aspect-[4/3] flex items-center justify-center mb-4">
            <%= image_tag card[:img], class: "max-h-full max-w-full object-contain rounded-md" %>
          </div>

          <!-- タイトル -->
          <div class="text-green-600 font-semibold text-base mb-2 min-h-[3rem]">
            <%= card[:title] %>
          </div>

          <!-- 本文 -->
          <p class="text-gray-700 text-sm leading-relaxed min-h-[4.5rem]">
            <%= card[:text].html_safe %>
          </p>
        </div>
      <% end %>

    </div>
  </div>

  <!-- あなたも今日から仲間に!! -->
  <div class="mt-20 mb-6 text-center" data-aos="fade-up" data-aos-delay="800" data-aos-duration="800" data-aos-once="true">
    <h2 class="text-green-600 text-2xl md:text-3xl font-bold tracking-wide">
      <%= t('home.join_now') %>
    </h2>
  </div>

  <!-- 横スクロールメニュー -->
  <div class="mt-12 w-full px-4 md:px-6 py-4 overflow-x-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200">
    <div class="flex justify-center">
      <div class="flex flex-row space-x-4 md:space-x-6 min-w-fit">
        <% menu_items = [
          {
            path: study_logs_path,
            icon: "home.png",
            label: t('home.menu.study_logs.label'),
            description: t('home.menu.study_logs.description'),
            options: { data: { action: "click->loading#show" } }
          },
          {
            path: current_user ? study_reminders_path : new_user_session_path,
            icon: "calendar.png",
            label: t('home.menu.study_calendar.label'),
            description: t('home.menu.study_calendar.description')
          },
          {
            path: current_user ? new_study_genre_path : new_user_session_path,
            icon: "icon.png",
            label: t('home.menu.create_genre.label'),
            description: t('home.menu.create_genre.description')
          },
          {
            path: current_user ? new_study_genre_study_log_path(current_user.study_genres) : new_user_session_path,
            icon: "study_logs.png",
            label: t('home.menu.post_study_log.label'),
            description: t('home.menu.post_study_log.description')
          }
        ] %>

        <% menu_items.each_with_index do |item, index| %>
          <div class="bg-white rounded-2xl shadow-md p-4 min-w-[160px] md:min-w-[200px] hover:bg-green-50 hover:shadow-lg transform hover:scale-105 transition duration-300 ease-in-out"
            data-aos="fade-up"
            data-aos-delay="<%= 300 + (index * 100) %>"
            data-aos-duration="700">
            
            <%= link_to item[:path], item[:options] || {}, class: "flex flex-col items-center text-center space-y-2" do %>
              <%= image_tag item[:icon], class: "w-10 h-10 md:w-12 md:h-12" %>

              <div class="text-green-800 font-bold text-sm md:text-base">
                <%= item[:label] %>
              </div>

              <div class="text-gray-500 text-xs md:text-sm leading-snug">
                <%= item[:description] %>
              </div>
            <% end %>
          </div>
        <% end %>

      </div>
    </div>
  </div>

</div>
