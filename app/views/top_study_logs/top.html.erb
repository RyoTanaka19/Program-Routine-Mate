<% menu_items = [
  { path: study_logs_path, icon: "home.png", label: "学習投稿記録一覧", description: "他の仲間の学習記録を見てみよう!", options: { data: { action: "click->loading#show" } } },
  (current_user && { path: study_reminders_path, icon: "calendar.png", label: "学習カレンダー", description: "学習時間を設定しよう!" }),
  (current_user && { path: new_study_genre_path, icon: "icon.png", label: "学習ジャンル作成", description: "自分が続けたいジャンルの学習を設定しよう!" }),
  (current_user && { path: new_study_genre_study_log_path(current_user.study_genres), icon: "study_logs.png", label: "学習記録投稿", description: "学習記録を投稿しよう!" })
].compact %>

<!-- メニュー項目 -->
<div class="relative z-20 mt-[30rem] flex justify-start flex-wrap gap-2 max-w-xl">
  <% menu_items.each_with_index do |item, index| %>
    <%= link_to item[:path], item[:options] || {} do %>
      <div
        class="w-40 min-h-[96px] p-2 bg-white shadow rounded-lg flex flex-col items-start justify-center opacity-0 animate-fade-in-up"
        style="animation-delay: <%= index * 0.15 %>s;"
      >
        <div class="flex items-center mb-1">
          <%= image_tag item[:icon], class: "w-5 h-5 mr-2" %>
          <span class="text-gray-800 font-semibold text-sm"><%= item[:label] %></span>
        </div>
        <small class="text-gray-500 text-xs leading-tight"><%= item[:description] %></small>
      </div>
    <% end %>
  <% end %>
</div>

<!-- 中央にランダム画像を表示 -->
<div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 overflow-hidden w-[48rem]">
  <% images = ["ogp.png", "ProgramRoutineMate.png", "mate.png"] %>
  <% selected_image = images.sample %>
  <div class="flex flex-col items-center">
    <%= image_tag selected_image, class: "w-96 h-96 opacity-90" %>

    <!-- 強調された説明テキスト -->
    <p class="mt-6 text-center text-green-700 text-xl font-bold bg-green-100 border border-green-300 px-6 py-3 rounded-lg shadow-md">
      👨‍💻プログラミング学習を共有するサービスです
    </p>
  </div>
</div>

<!-- フローティングテキスト -->
<div class="floating-text">
  👨‍💻一緒に学習習慣をつけよう！
</div>

<!-- スタイル -->
<style>
@keyframes sway {
  0%   { transform: translateY(0) rotate(0deg); }
  25%  { transform: translateY(-4px) rotate(-2deg); }
  50%  { transform: translateY(0) rotate(0deg); }
  75%  { transform: translateY(4px) rotate(2deg); }
  100% { transform: translateY(0) rotate(0deg); }
}

.floating-text {
  position: fixed;
  top: 50%;
  right: 10rem; /* ← 左に寄せる調整済み */
  transform: translateY(-50%);
  background-color: #d1fae5;
  border: 2px solid #10b981;
  border-radius: 1rem;
  padding: 0.5rem 1rem;
  color: #047857;
  font-weight: 700;
  font-size: 1rem;
  animation: sway 2.5s ease-in-out infinite;
  z-index: 999;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  white-space: nowrap;
}

.floating-text::before {
  content: "";
  position: absolute;
  bottom: -10px;
  right: 20px;
  border-width: 10px 10px 0;
  border-style: solid;
  border-color: #d1fae5 transparent transparent transparent;
}
</style>
