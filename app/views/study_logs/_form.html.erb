<div class="flex items-center justify-center min-h-screen bg-gray-100">
  <%= form_with(model: [@study_setting, study_log], local: true) do |form| %>
    <div class="max-w-4xl w-full bg-white p-6 rounded-md shadow-lg">
      <!-- エラーメッセージ -->
      <%= render 'shared/error_messages', object: form.object %>

      <!-- ジャンル -->
      <div class="mb-4">
        <%= form.label :genre, "ジャンル", class: "block text-sm font-medium text-gray-700" %>
        <%= form.select :genre, options_for_select(['Ruby', 'Python', 'JavaScript', 'Java', 'C++']), { prompt: '選択してください' }, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 p-2" %>
      </div>


      <!-- 学習日 -->
      <div class="mb-4">
        <%= form.label :study_day, "学習日", class: "block text-sm font-medium text-gray-700" %>
        <%= form.date_field :study_day, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" %>
      </div>

      <!-- 開始時間 -->
      <div class="mb-4">
        <%= form.label :start_time, "開始時間", class: "block text-sm font-medium text-gray-700" %>
        <%= form.time_select :start_time, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" %>
      </div>

      <!-- 終了時間 -->
      <div class="mb-4">
        <%= form.label :end_time, "終了時間", class: "block text-sm font-medium text-gray-700" %>
        <%= form.time_select :end_time, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" %>
      </div>

      <!-- 学習内容 -->
      <div class="mb-4">
        <%= form.label :content, "学習内容:", class: "block text-sm font-medium text-gray-700" %>
        <%= form.text_field :content, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 p-2" %>
      </div>


      <!-- 画像 -->
      <div class="mb-4">
        <%= form.label :image, "画像:", class: "block text-sm font-medium text-gray-700" %>
        <%= form.file_field :image, class: "mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500", accept: 'image/*' %>
        <%= image_tag(study_log.image? ? study_log.image_url : "default_study_logs_image.png", width: "300", height: "200", class: "mt-2") %>
        <%= form.hidden_field :image_cache %>
      </div>

      <!-- 感想 -->
      <div class="mb-4">
        <%= form.label :text, "感想など:", class: "block text-sm font-medium text-gray-700" %>
        <%= form.text_area :text, class: "mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" %>
      </div>

      <!-- 送信ボタン -->
      <div class="mt-6">
        <%= form.submit "投稿", class: "w-full py-2 px-4 bg-blue-500 text-white rounded-md shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
      </div>
    </div>
  <% end %>

  <% if @study_log.persisted? %>
    <%= render 'form' %>
  <% end %>
</div>