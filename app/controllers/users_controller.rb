class UsersController < ApplicationController
  # ===============================
  # ユーザー認証に関するフィルター
  # ===============================

  # Deviseのヘルパーメソッド `authenticate_user!` を使用して、
  # すべてのアクションでログインしているユーザーであることを確認します。
  # 未ログインのユーザーがアクセスした場合は、自動的にログインページへリダイレクトされます。
  before_action :authenticate_user!

  # ===============================
  # ユーザープロフィール表示アクション
  # ===============================

  # ユーザーの詳細ページ（プロフィール）を表示するアクションです。
  def show
    # `params[:id]` から指定されたIDをもとに、該当ユーザーをデータベースから取得します。
    # 取得したユーザー情報はビューで使用するために `@user` に格納します。
    @user = User.find(params[:id])

    # 指定されたユーザーが登録した学習ログ（study_logs）を取得し、ビューで使用できるように `@study_logs` に格納します。
    # 学習履歴などをユーザープロフィール上で確認できるようにするためです。
    @study_logs = @user.study_logs
  end

  # ===============================
  # バッジ表示アクション
  # ===============================

  # ログイン中のユーザーが獲得したバッジ一覧を表示するアクションです。
  def badges
    # ログインユーザー（`current_user`）が所有しているバッジ情報を取得し、
    # ビューで表示するために `@study_badges` に格納します。
    @study_badges = current_user.study_badges
  end
end
